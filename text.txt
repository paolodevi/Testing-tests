Thanks ‚Äî this is a classic MATLAB axes-state issue, not a conceptual one.
What‚Äôs happening is:

> The rectangle is drawn on the correct axes, but the inset axes is either not active or is being overwritten, so your ‚Äúsecond image‚Äù (zoomed plot) never really takes effect.



Below is a robust, failure-proof pattern that avoids all of MATLAB‚Äôs axes-focus pitfalls.


---

‚úÖ Correct, robust solution (works reliably)

Key fixes compared to your attempt

1. Explicitly target axes when plotting


2. Disable axes replacement


3. Force inset axes to stay on top




---

Minimal working example (copy‚Äìpaste)

x = linspace(0,10,2000);
y = sin(x).*exp(-0.1*x);

% Zoom region (DATA coordinates)
xZoom = [2.5 3.2];
yZoom = [0.4 0.8];

figure

% ================= MAIN AXES =================
axMain = axes('Position',[0.1 0.1 0.85 0.85]);
plot(axMain, x, y, 'LineWidth', 1.2)
grid(axMain,'on')
hold(axMain,'on')

rectangle(axMain, ...
    'Position',[xZoom(1), yZoom(1), diff(xZoom), diff(yZoom)], ...
    'EdgeColor','r', ...
    'LineWidth',1.5, ...
    'LineStyle','--');

% ================= INSET AXES =================
axInset = axes( ...
    'Position',[0.15 0.65 0.25 0.25], ...
    'Box','on', ...
    'Layer','top', ...
    'FontSize',8);

plot(axInset, x, y, 'LineWidth', 1.2)
grid(axInset,'on')

xlim(axInset, xZoom)
ylim(axInset, yZoom)


---

üîç Why your previous version failed

Problem 1 ‚Äî plot(x,y) without axis handle

MATLAB plots into whatever axes is current, which is not guaranteed to be the inset.

‚ùå Fragile:

axes(axInset)
plot(x,y)

‚úÖ Correct:

plot(axInset, x, y)


---

Problem 2 ‚Äî inset axes hidden or overwritten

If the main axes redraws (e.g. hold off, cla, or resizing), it can cover the inset.

Fix:

'Layer','top'


---

Problem 3 ‚Äî limits applied to wrong axes

Without axis handles, xlim / ylim often affect the main axes instead.

Fix:

xlim(axInset, xZoom)
ylim(axInset, yZoom)


---

‚úÖ Debug checklist (quick)

If the inset doesn‚Äôt work, check:

gca == axInset   % should be true when plotting inset

If false ‚Üí MATLAB is plotting in the wrong axes.


---

‚ú® Optional enhancements (if you want)

Draw connecting lines (publication quality)

annotation('line',[0.28 0.38],[0.65 0.45])
annotation('line',[0.40 0.55],[0.65 0.45])

Prevent accidental overwrites

set(axMain,'NextPlot','add')
set(axInset,'NextPlot','replacechildren')


---

Bottom line

Your idea was correct ‚Äî the failure is due to MATLAB‚Äôs implicit axes handling.
Using explicit axes handles everywhere makes this 100% reliable.

If you want, tell me:

MATLAB version

2D vs 3D plot

multiple zoom insets


and I‚Äôll tailor it exactly to your figure style.