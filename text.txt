function playTwoAnimations(frames1, frames2, fps)
%PLAYTWOANIMATIONS Display two sets of frames side by side using subplots.
%
%   playTwoAnimations(frames1, frames2, fps)
%
%   frames1, frames2 : struct arrays from getframe()
%   fps (optional)   : playback speed (default = 30)

    if nargin < 3, fps = 30; end
    nFrames = min(length(frames1), length(frames2));

    % Make figure and layout
    figure('Color','w');
    t = tiledlayout(1,2, 'TileSpacing','compact', 'Padding','compact');

    % Show first frames and create image handles
    nexttile(1);
    h1 = imshow(frames1(1).cdata, 'Border', 'tight');
    title('Animation 1');

    nexttile(2);
    h2 = imshow(frames2(1).cdata, 'Border', 'tight');
    title('Animation 2');

    % Fix aspect ratio
    axis image off

    % Timing setup
    dt = 1/fps;
    tic;

    % Playback loop
    for k = 1:nFrames
        % Update the two images
        set(h1, 'CData', frames1(k).cdata);
        set(h2, 'CData', frames2(k).cdata);

        drawnow limitrate;

        % Keep frame timing steady
        elapsed = toc;
        pause(max(0, k*dt - elapsed));
    end
end