Excellent — that’s a very nice enhancement 🔥

Here’s how to do it with minimal, local edits so that:

each animation window starts paused,

you can unpause or pause any combination of them using a shared toggle,

the playback state is synchronized across all open animations.



---

🧠 Strategy

We’ll add one extra property and a tiny bit of logic:

1. Add a shared boolean property playing inside your SharedState handle.


2. Create a Play/Pause button in every figure that toggles this global flag.


3. Modify the animation timer’s updateFrames callback to run only when playing is true.




---

✅ 1. Add to your SharedState.m

classdef SharedState < handle
    properties
        groups
        k
        handles
        done = false
        playing = false   % <-- NEW: global play/pause state
    end
end


---

✅ 2. In launchAnimation, add a Play/Pause button

Insert this after you create the ✓ and ✗ buttons:

% Play / Pause button (toggles shared.playing)
uicontrol('Style','pushbutton', ...
    'String','▶/⏸', ...
    'FontSize',18, ...
    'Units','normalized', ...
    'Position',[0.82 0.05 0.15 0.15], ...
    'Callback',@(~,~) togglePlay(shared));


---

✅ 3. Add a helper function (somewhere near your callbacks)

This can go in the same file as your other callbacks:

function togglePlay(shared)
% Toggle global play/pause for all animations
shared.playing = ~shared.playing;
if shared.playing
    disp('▶ Playing all animations');
else
    disp('⏸ Paused all animations');
end
end


---

✅ 4. Modify the updateFrames function

Inside your launchAnimation, locate this part:

function updateFrames
    if ~ishandle(fig)
        stop(timerObj); delete(timerObj); return;
    end
    kFrame = mod(kFrame, nFrames) + 1;
    set(h1,'CData',frames1(kFrame).cdata);
    set(h2,'CData',frames2(kFrame).cdata);
    drawnow limitrate nocallbacks;
end

…and replace it with:

function updateFrames
    if ~ishandle(fig)
        stop(timerObj); delete(timerObj); return;
    end
    if ~shared.playing
        return; % do nothing if paused
    end
    kFrame = mod(kFrame, nFrames) + 1;
    set(h1,'CData',frames1(kFrame).cdata);
    set(h2,'CData',frames2(kFrame).cdata);
    drawnow limitrate nocallbacks;
end


---

🎬 Result

All animations open paused by default.

Click ▶/⏸ on any figure → all animations start/resume or pause simultaneously.

You can toggle freely — timers keep running but only advance when shared.playing == true.



---

Would you like the play/pause button to change its text dynamically (e.g., show “▶ Play” when paused and “⏸ Pause” when playing)? I can show that quick addition too.

